$(function(){$.get("api/ajax_verSesPortero.php").done(function(r){"sesIni"===r&&location.replace("/dashboard.html")}).fail(function(r){console.error(r.responseText),alertar("Atención","No se puede verificar la sesión."),$("#botIniSes").prop("disabled",!0)})}),$("#pwdOlvidada").click(function(){alertar("Contraseña olvidada","Contactar con el administrador del Sistema.")}),$("#formIniSes").submit(function(r){r.preventDefault();var a,o=$("#botIniSes"),e=o.html(),s=this.usuario.value,n=this.pwd.value,i=this;return o.prop("disabled",!0).html("Enviando..."),$(".form-control-feedback").remove(),$(".form-group").removeClass("has-error"),""===s||s.length<4?(alertar("Aviso","El campo USUARIO no es válido."),$("#group-usuario").addClass("has-error"),a="<span class='glyphicon glyphicon-remove form-control-feedback' aria-hidden='true'></span>",$("#input-usuario").append(a),void o.prop("disabled",!1).html(e)):""===n||n.length<6?(alertar("Aviso","El campo CONTRASEÑA no es válido."),$("#group-password").addClass("has-error"),a="<span class='glyphicon glyphicon-remove form-control-feedback' aria-hidden='true'></span>",$("#input-password").append(a),void o.prop("disabled",!1).html(e)):void $.post("/api/ajax_iniSes.php",{usuario:s,password:n}).done(function(r){if("usrDes"===r)alertar("Aviso","El USUARIO no existe."),$("#group-usuario").addClass("has-error"),a="<span class='glyphicon glyphicon-remove form-control-feedback' aria-hidden='true'></span>",$("#input-usuario").append(a);else if("pwdDes"===r)alertar("Aviso","La CONTRASEÑA no coincide."),$("#group-password").addClass("has-error"),a="<span class='glyphicon glyphicon-remove form-control-feedback' aria-hidden='true'></span>",$("#input-password").append(a);else{if("ok"===r)return void location.replace("/dashboard.html");alertar("Aviso","Ha ocurrido un error inesperado. Intentar más tarde."),console.error(r)}}).fail(function(r){console.error(r.responseText+" - "+r.status+" - "+r.statusText),alertar("Atención","Ha ocurrido un error interno. Intentar más tarde.")}).always(function(){o.prop("disabled",!1).html(e),i.reset()})});